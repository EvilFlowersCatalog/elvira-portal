import { useTranslation } from 'react-i18next';
import { ChangeEvent, FormEvent, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { IoSearchOutline } from 'react-icons/io5';
import {
  NAVIGATION_PATHS,
  THEME_TYPE,
} from '../../../utils/interfaces/general/general';
import useAppContext from '../../../hooks/contexts/useAppContext';
import ElviraInput from '../../inputs/ElviraInput';
import Button from '../../buttons/Button';
import { H1 } from '../../header/Heading';

const HomeHeader = () => {
  const { t } = useTranslation();
  const [searchInput, setSearchInput] = useState<string>('');

  const navigate = useNavigate();

  // input handler
  const handleSearchInput = (e: ChangeEvent<HTMLInputElement>) => {
    setSearchInput(e.target.value);
  };

  // submit handler
  const submit = (e: FormEvent<HTMLFormElement>) => {
    e.preventDefault(); // prevent

    // set new params
    const params = new URLSearchParams();
    if (searchInput) {
      params.set('query', searchInput);

      // navigate and search
      navigate({
        pathname: NAVIGATION_PATHS.library,
        search: params.toString(),
      });
    }
  };

  return (
    <div className='flex flex-col gap-5 py-12'>
      <div className='text-center'>
        <H1 className='px-0'>{t('about.title')}</H1>
      </div>

      <div
        className="text-white w-full py-4 px-5 rounded-lg relative"
        style={{
          background: "linear-gradient(90deg, #1F5D9B 30%, rgba(0, 119, 204, 0.935294) 60%, #00A3E0 100%)",
          boxShadow: "0px 4px 12px 0px #0000001A",
        }}>
        <p className='font-bold mb-2'>{t('about.banner.title')}</p>
        <p className='text-sm mb-4'>{t('about.banner.description')}</p>
        <Button>{t('about.banner.action')}</Button>

        <div className='absolute right-4 top-0 h-full w-auto aspect-square p-6 hidden mdlg:block'>
          <svg className='w-full h-full' viewBox="0 0 500 500" version="1.1" xmlns="http://www.w3.org/2000/svg">
            <path d="M0 0 C6.4234066 3.81965479 10.48333513 8.85203635 12.48046875 16.08984375 C12.70751953 19.06591797 12.70751953 19.06591797 12.67578125 22.14453125 C12.66611328 23.80742188 12.66611328 23.80742188 12.65625 25.50390625 C12.63111328 27.21707031 12.63111328 27.21707031 12.60546875 28.96484375 C12.59644531 30.13015625 12.58742188 31.29546875 12.578125 32.49609375 C12.55464307 35.36088952 12.52180016 38.2252591 12.48046875 41.08984375 C13.76141418 41.079851 13.76141418 41.079851 15.0682373 41.06965637 C23.1865341 41.00909873 31.3047531 40.96364526 39.4232254 40.93440723 C43.59523799 40.91886949 47.7670612 40.89785399 51.93896484 40.86352539 C55.97849846 40.83050079 60.01785199 40.81290182 64.05751038 40.80521202 C65.58499479 40.79974464 67.11247137 40.78907317 68.63987732 40.77265358 C93.4074421 40.51742642 116.70364238 46.84909901 135.12695312 64.078125 C150.02968569 78.73708331 160.53355697 98.20373243 161.65625 119.41015625 C161.6661067 121.97946982 161.62180311 124.52488691 161.48046875 127.08984375 C162.66382813 127.0434375 163.8471875 126.99703125 165.06640625 126.94921875 C177.26999566 126.60958446 186.45153879 127.35118659 195.7265625 136.1015625 C203.49816281 144.911684 204.79088496 154.48601406 204.78125 165.796875 C204.78553513 166.91744797 204.78982025 168.03802094 204.79423523 169.19255066 C204.79996236 171.55682705 204.80049075 173.92112106 204.79614258 176.28540039 C204.79298833 179.88003009 204.81644343 183.4738316 204.84179688 187.06835938 C204.84407077 189.37369689 204.84477295 191.67903659 204.84375 193.984375 C204.85295975 195.04823929 204.86216949 196.11210358 204.87165833 197.20820618 C204.8065698 207.84310213 202.43801818 216.87300936 195.48046875 225.08984375 C187.01960568 233.26510807 178.36924088 234.40571074 167.06860352 234.24365234 C165.20564201 234.20245203 163.34299112 234.14757981 161.48046875 234.08984375 C161.51527344 234.63769531 161.55007813 235.18554688 161.5859375 235.75 C162.30320136 256.75558457 153.53384396 276.00665698 139.91796875 291.52734375 C129.0439725 303.00025201 116.69481577 311.36354275 101.48046875 316.08984375 C100.34493797 316.46109422 100.34493797 316.46109422 99.18646717 316.8398447 C89.53362909 319.65481238 80.13893155 319.52067102 70.18041992 319.49389648 C68.25226956 319.49960845 66.32412257 319.50657589 64.39598083 319.51469421 C59.1891895 319.53255105 53.98256738 319.53147115 48.77575469 319.52575183 C44.41480319 319.5226486 40.05388366 319.52876512 35.69293672 319.53479058 C25.3967449 319.54881017 15.1006361 319.54729639 4.80444336 319.53588867 C-5.78495427 319.52441469 -16.37409842 319.538477 -26.96346265 319.56528515 C-36.0849007 319.58750464 -45.20625956 319.59406534 -54.32772273 319.58820873 C-59.76240054 319.58485232 -65.196916 319.58716605 -70.63157082 319.60445976 C-75.74615981 319.62002634 -80.860376 319.61586646 -85.97495079 319.59715462 C-87.84083871 319.59349523 -89.70675485 319.59649881 -91.57261658 319.60704041 C-117.40828263 319.74174303 -138.87170729 311.44476995 -157.51953125 293.08984375 C-171.83442451 278.80446573 -180.6497353 258.43510889 -180.70703125 238.15234375 C-180.66076915 236.79752515 -180.60547897 235.4427246 -180.51953125 234.08984375 C-181.63070312 234.13625 -182.741875 234.18265625 -183.88671875 234.23046875 C-192.50677606 234.48454176 -199.85834824 234.57170584 -207.51953125 230.08984375 C-208.23496094 229.67734375 -208.95039063 229.26484375 -209.6875 228.83984375 C-216.98245844 224.02216012 -221.06573208 216.91154299 -223.09741211 208.50308228 C-223.92117253 203.79367634 -223.82439409 199.05358129 -223.8203125 194.28515625 C-223.82459763 193.16599823 -223.82888275 192.04684021 -223.83329773 190.89376831 C-223.83901932 188.53546828 -223.83955738 186.17715061 -223.83520508 183.81884766 C-223.83204732 180.2330886 -223.85552513 176.64815715 -223.88085938 173.0625 C-223.88313297 170.76171978 -223.88383558 168.46093736 -223.8828125 166.16015625 C-223.89202225 165.09942902 -223.90123199 164.03870178 -223.91072083 162.9458313 C-223.84264036 151.85735706 -221.45022302 143.08165839 -213.51953125 135.08984375 C-205.78533273 128.80832947 -198.98471996 126.7608207 -189.14453125 126.96484375 C-188.31308594 126.97386719 -187.48164063 126.98289062 -186.625 126.9921875 C-184.58971788 127.01558155 -182.55458561 127.0514465 -180.51953125 127.08984375 C-180.57173828 126.14238281 -180.57173828 126.14238281 -180.625 125.17578125 C-181.27260654 103.77392687 -172.16506966 83.75976212 -157.69140625 68.36328125 C-156.9746875 67.61304687 -156.25796875 66.8628125 -155.51953125 66.08984375 C-154.9678125 65.46335937 -154.41609375 64.836875 -153.84765625 64.19140625 C-141.1430935 50.29185987 -120.86332273 42.90336413 -102.51953125 41.08984375 C-100.04531859 41.00849375 -97.56929572 40.97189774 -95.09375 40.97631836 C-94.40007828 40.97617233 -93.70640656 40.97602631 -92.99171448 40.97587585 C-90.73012004 40.9765649 -88.46861105 40.98430936 -86.20703125 40.9921875 C-84.62662806 40.99405527 -83.04622429 40.99547748 -81.46582031 40.99647522 C-77.32963429 41.00027213 -73.19348402 41.01007793 -69.05731201 41.0211792 C-64.82727543 41.03145443 -60.597233 41.03598587 -56.3671875 41.04101562 C-48.0846191 41.05170304 -39.80207964 41.06874507 -31.51953125 41.08984375 C-31.54047852 40.37965088 -31.56142578 39.66945801 -31.58300781 38.93774414 C-31.66687811 35.67609181 -31.71841482 32.41466731 -31.76953125 29.15234375 C-31.80304688 28.03537109 -31.8365625 26.91839844 -31.87109375 25.76757812 C-31.96254387 17.97145541 -31.31285759 11.0886506 -25.73925781 5.21313477 C-18.48923015 -1.36685201 -9.52098152 -3.43936232 0 0 Z M-85.6953125 157.890625 C-91.29755686 164.64450846 -94.86964434 173.00726703 -94.73828125 181.80859375 C-93.81328198 191.45501468 -89.36318589 198.82434505 -82.515625 205.48046875 C-76.3664524 210.43831437 -68.63649847 212.49984885 -60.82421875 212.3671875 C-51.84510182 211.2866497 -43.48823549 206.9336075 -37.765625 199.94921875 C-32.01951646 191.80774448 -30.53561231 183.95426184 -31.51953125 174.08984375 C-33.30520493 166.33685548 -37.53345875 160.26009717 -43.51953125 155.08984375 C-57.41506098 146.46432234 -73.38163771 146.3762151 -85.6953125 157.890625 Z M18.48046875 161.08984375 C13.00000522 169.91875278 11.12678861 178.22856365 12.90625 188.5625 C15.26189141 196.75666368 20.30018388 203.02463848 27.48046875 207.52734375 C35.84413059 212.08819258 43.43308642 213.35640442 52.60546875 210.83984375 C60.49093282 208.23944644 67.61330035 203.12466055 71.77734375 195.8125 C75.66610707 187.34457698 76.84234037 179.53806497 73.85546875 170.58984375 C70.27440592 161.56856003 65.12781217 155.61528681 56.48046875 151.08984375 C42.30559067 145.49651348 28.24543991 149.78404873 18.48046875 161.08984375 Z " fill="#E6F3FF" transform="translate(265.51953125,0.91015625)" />
            <path d="M0 0 C1.41392098 -0.00299849 2.82784114 -0.00640259 4.24176025 -0.01017761 C8.05617476 -0.01895342 11.87056678 -0.02135305 15.68499041 -0.0219934 C18.07687515 -0.02270777 20.46875431 -0.0248494 22.86063766 -0.02749062 C31.23033761 -0.03672411 39.6000217 -0.04082817 47.96972656 -0.04003906 C55.73017065 -0.03943941 63.49054498 -0.04997433 71.25097144 -0.06578273 C77.94691242 -0.07892899 84.64283081 -0.08421998 91.33878458 -0.08358365 C95.3231066 -0.08333066 99.30736658 -0.08607031 103.29167557 -0.0967617 C107.04612502 -0.10656243 110.80045466 -0.10644147 114.55490875 -0.09924507 C116.56038506 -0.09772873 118.56586167 -0.10596221 120.57131958 -0.11468506 C133.23291319 -0.07171702 145.84580203 1.10160363 158.02880859 4.70776367 C159.34075195 5.09194458 159.34075195 5.09194458 160.67919922 5.48388672 C193.73085688 15.63555227 220.74503789 38.60004549 236.95532227 68.984375 C245.99127849 86.6220553 250.81517113 105.28355168 251.27880859 125.08276367 C251.31796387 126.04206787 251.35711914 127.00137207 251.39746094 127.98974609 C251.4236698 135.16660744 249.45938755 139.75172594 244.71630859 145.14526367 C240.11309983 149.14542287 235.84842834 150.26944189 229.84096241 150.27948475 C227.98972003 150.28617151 227.98972003 150.28617151 226.10107881 150.29299337 C224.72410888 150.29290407 223.34713897 150.29271421 221.97016907 150.29243469 C220.51310112 150.29573332 219.05603408 150.29945889 217.59896821 150.30357617 C213.58503265 150.31360438 209.57111205 150.31731428 205.55716574 150.31996548 C201.23186521 150.3238661 196.90657654 150.3334446 192.58128357 150.34217834 C182.13079461 150.36194954 171.68030467 150.37200976 161.22980168 150.38090613 C156.31011869 150.38528793 151.39043677 150.39065502 146.47075462 150.395895 C130.11944076 150.41290788 113.76812758 150.42740249 97.41680622 150.43464375 C93.1726462 150.43655368 88.92848618 150.43847401 84.68432617 150.44042969 C83.10200221 150.4411553 83.10200221 150.4411553 81.48771211 150.44189557 C64.39577791 150.4501975 47.30391365 150.47553692 30.21201 150.50801037 C12.66956248 150.54106846 -4.87284948 150.55909137 -22.41532832 150.56228799 C-32.26699301 150.56445423 -42.11855569 150.57321966 -51.97019005 150.59874916 C-60.3596027 150.62043907 -68.74888856 150.628515 -77.13832607 150.61878238 C-81.41882537 150.61423272 -85.69906299 150.61616244 -89.97952652 150.63554382 C-93.89978752 150.65314096 -97.81959528 150.65220609 -101.73986087 150.63664653 C-103.15646417 150.63426519 -104.57309856 150.63862136 -105.98965427 150.65047518 C-113.85393475 150.71219653 -119.59962971 150.48434346 -126.28369141 146.14526367 C-128.34228516 144.11010742 -128.34228516 144.11010742 -129.72119141 142.08276367 C-130.43082031 141.07536133 -130.43082031 141.07536133 -131.15478516 140.04760742 C-137.61103607 129.16804273 -133.37040575 109.68769944 -130.60400391 98.02416992 C-125.5852334 78.75471236 -116.99589635 61.50670035 -104.28369141 46.14526367 C-103.85781738 45.62899414 -103.43194336 45.11272461 -102.99316406 44.58081055 C-81.6074291 19.04514153 -50.29116676 3.56888845 -17.26845169 0.3583889 C-11.5179019 -0.05222606 -5.7626321 -0.00200254 0 0 Z " fill="#E6F3FF" transform="translate(197.28369140625,361.854736328125)" />
          </svg>
        </div>
      </div>

      <form
        className='relative flex flex-col w-full items-center gap-1 text-darkGray dark:text-white'
        onSubmit={submit}
      >
        <ElviraInput
          type={'text'}
          value={searchInput}
          placeholder={t('home.search')}
          onChange={handleSearchInput}
          className='border-none pr-32'
          paddingLeft={40}
        />
        <button type='submit' className={'absolute left-2 top-[31px]'}>
          <IoSearchOutline size={25} />
        </button>
        <button className='absolute md:right-4 md:bottom-2 size-fit flex items-center gap-2 text-xs text-primary bg-primaryLight rounded-md px-2 py-1 max-md:relative max-md:w-full max-md:flex max-md:justify-center max-md:p-3'>
          <svg className='w-4' viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16.5 8.58333C16.5029 9.68322 16.2459 10.7682 15.75 11.75C15.162 12.9264 14.2581 13.916 13.1395 14.6077C12.021 15.2995 10.7319 15.6662 9.41667 15.6667C8.31678 15.6695 7.23176 15.4126 6.25 14.9167L1.5 16.5L3.08333 11.75C2.58744 10.7682 2.33047 9.68322 2.33333 8.58333C2.33384 7.26812 2.70051 5.97904 3.39227 4.86045C4.08402 3.74187 5.07355 2.83797 6.25 2.24999C7.23176 1.7541 8.31678 1.49713 9.41667 1.49999H9.83333C11.5703 1.59582 13.2109 2.32896 14.441 3.55904C15.671 4.78912 16.4042 6.4297 16.5 8.16666V8.58333Z" stroke="#0077CC" strokeWidth="1.25" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
          <p className='whitespace-nowrap'>AI Asistent</p>
        </button>
      </form>
    </div>
  );
};

export default HomeHeader;
